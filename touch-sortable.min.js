/* Touch-Sortable.js */
/* https://github.com/docubuzz/touch-sortable.js */

(function(d){d.fn.sortable=function(h){h=h||{};return this.each(function(){function j(b){var c;b?(b=b.originalEvent,c=b.touches?b.touches[0].pageY:b.pageY,c<=k?c=k:c>=l&&(c=l),50>=c-d(window).scrollTop()?window.scrollBy(0,-5):50>=d(window).height()-c&&window.scrollBy(0,5),c-=f,a.css("top",c)):c=a.css("top").split("px")[0];m=Math.abs(Math.floor(c/e));c<-e?a.prev().length&&(a.siblings().css("position","relative"),a.prev().is(":animated")||a.prev().animate({top:e},150/m,function(){f-=e;d(this).insertAfter(a).css({top:""});
a.css("top","+="+e);j()})):c>e&&a.next().length&&(a.siblings().css("position","relative"),a.next().is(":animated")||a.next().animate({top:-e},150/m,function(){f+=e;d(this).insertBefore(a).css({top:""});a.css("top","-="+e);j()}));b&&b.preventDefault()}function g(){d("body").off(".sortable");a.prev().is(":animated")||a.next().is(":animated")?setTimeout(function(){g()},50):a.animate({top:"-="+a.css("top")},150,function(){a.css("top","auto").removeClass("inMotion").css("z-index",0);if(h.onComplete)h.onComplete(a.parent())})}
var n="ontouchstart"in document.documentElement;d(this).children().on(n?"touchstart":"mousedown",function(b){b=b.originalEvent;a=d(n?b.touches[0].target:b.target);k=a.parent().position().top;l=k+a.parent().innerHeight()+a.height();a.addClass("inMotion").css({position:"relative","z-index":1});b.touches?(f=b.touches[0].pageY,d("body").on("touchmove.sortable",j).on("touchend.sortable",g).on("touchcancel.sortable",g)):(f=b.pageY,d("body").on("mousemove.sortable",j).on("mouseup.sortable",g).on("mouseleave.sortable",
g))}).css({cursor:"move","user-select":"none"}).attr("unselectable","on").on("selectstart",!1);var a,k,l,f,m,e=d(this).children(":nth-child(2)").offset().top-d(this).children(":nth-child(1)").offset().top})}})(jQuery);
