/* Touch-Sortable.js */
/* https://github.com/docubuzz/touch-sortable.js */

(function(c){c.fn.sortable=function(h){h=h||{};return this.each(function(){function j(b){var d;b?(b=b.originalEvent,d=b.touches?b.touches[0].pageY:b.pageY,d<=k?d=k:d>=l&&(d=l),50>=d-c(window).scrollTop()?window.scrollBy(0,-5):50>=c(window).height()+c(window).scrollTop()&&window.scrollBy(0,5),d-=g,a.css("top",d)):d=a.css("top").split("px")[0];var f=Math.abs(Math.floor(d/e));d<-e?a.prev().length&&(a.siblings().css("position","relative"),a.prev().is(":animated")||a.prev().animate({top:e},300/Math.pow(2,
f),function(){g-=e;c(this).insertAfter(a).css({top:""});a.css("top","+="+e);j()})):d>e&&a.next().length&&(a.siblings().css("position","relative"),a.next().is(":animated")||a.next().animate({top:-e},300/Math.pow(2,f),function(){g+=e;c(this).insertBefore(a).css({top:""});a.css("top","-="+e);j()}));b&&b.preventDefault()}function f(){c("body").off(".sortable");a.prev().is(":animated")||a.next().is(":animated")?setTimeout(function(){f()},50):a.animate({top:"-="+a.css("top")},150,function(){a.css("top",
"auto").removeClass("inMotion").css("z-index","");if(h.onComplete)h.onComplete(a.parent())})}var m="ontouchstart"in document.documentElement?"touchstart":"mousedown";c(this).children().on(m,function(b){b=b.originalEvent;a=c(b.touches?b.touches[0].target:b.target);k=a.parent().position().top;l=k+a.parent().innerHeight()+a.height();a.addClass("inMotion").css({position:"relative","z-index":1});b.touches?(g=b.touches[0].pageY,c("body").on("touchmove.sortable",j).on("touchend.sortable",f).on("touchcancel.sortable",
f)):(g=b.pageY,c("body").on("mousemove.sortable",j).on("mouseup.sortable",f).on("mouseleave.sortable",f))}).css({cursor:"move","user-select":"none"}).attr("unselectable","on").on("selectstart",!1);var a,k,l,g,e=c(this).children(":nth-child(2)").offset().top-c(this).children(":nth-child(1)").offset().top})}})(jQuery);